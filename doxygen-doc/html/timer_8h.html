<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libflm-0.3: timer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="libflm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libflm-0.3&#160;<span id="projectnumber">0.3</span></div>
   <div id="projectbrief">A simple event-driven IO library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>timer.h File Reference</h1>  </div>
</div>
<div class="contents">

<p>Delayed function execution.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;flm/core/public/obj.h&quot;</code><br/>
</div>
<p><a href="timer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ac51beb090b770e3abb1be9d84678d486">flm_TimerHandler</a> )(flm_Timer *timer, void *state)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">flm_Timer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#af21a94f6ef9e64cc0ec4d47fef11d258">flm_TimerNew</a> (flm_Monitor *monitor, <a class="el" href="timer_8h.html#ac51beb090b770e3abb1be9d84678d486">flm_TimerHandler</a> handler, void *state, uint32_t delay)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new timer.  <a href="#af21a94f6ef9e64cc0ec4d47fef11d258"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a0550f46fd2ded57e898360876210eec6">flm_TimerReset</a> (flm_Timer *timer, uint32_t delay)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the timer.  <a href="#a0550f46fd2ded57e898360876210eec6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a4bf56d6f81f12777bdb2d1695c088f7a">flm_TimerCancel</a> (flm_Timer *timer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel the timer.  <a href="#a4bf56d6f81f12777bdb2d1695c088f7a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">flm_Timer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a5d0212004288711ecfa7ca06b4baceb3">flm_TimerRetain</a> (flm_Timer *timer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the reference counter.  <a href="#a5d0212004288711ecfa7ca06b4baceb3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#af24321f27e1afe647729a6342fb80447">flm_TimerRelease</a> (flm_Timer *timer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrement the reference counter.  <a href="#af24321f27e1afe647729a6342fb80447"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Delayed function execution. </p>
<p><code>Timers</code> are simple objects that will call a function after a specified delay. </p>

<p>Definition in file <a class="el" href="timer_8h_source.html">timer.h</a>.</p>
</div><hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ac51beb090b770e3abb1be9d84678d486"></a><!-- doxytag: member="timer.h::flm_TimerHandler" ref="ac51beb090b770e3abb1be9d84678d486" args=")(flm_Timer *timer, void *state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="timer_8h.html#ac51beb090b770e3abb1be9d84678d486">flm_TimerHandler</a>)(flm_Timer *timer, void *state)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A timer handler is a callback function that take the timer itself as its first argument, and an user-defined state set at the timer creation (see the flm_TimerCreate() function). </p>

<p>Definition at line <a class="el" href="timer_8h_source.html#l00045">45</a> of file <a class="el" href="timer_8h_source.html">timer.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af21a94f6ef9e64cc0ec4d47fef11d258"></a><!-- doxytag: member="timer.h::flm_TimerNew" ref="af21a94f6ef9e64cc0ec4d47fef11d258" args="(flm_Monitor *monitor, flm_TimerHandler handler, void *state, uint32_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">flm_Timer* flm_TimerNew </td>
          <td>(</td>
          <td class="paramtype">flm_Monitor *&#160;</td>
          <td class="paramname"><em>monitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="timer_8h.html#ac51beb090b770e3abb1be9d84678d486">flm_TimerHandler</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new timer. </p>
<p>The timer handler will be called after delay (in milliseconds) is elapsed. The handler will be called just once.</p>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>There is no guaranty that the handler will be called exactly at the specified delay. In fact, libflm rounds the delay to the neared 1/10 second.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">monitor</td><td>A pointer to the monitor that will handle the timer. </td></tr>
    <tr><td class="paramname">handler</td><td>The timer handler that will be called after the delay is elapsed. </td></tr>
    <tr><td class="paramname">state</td><td>An user-defined state that will be given back to the timer handler. </td></tr>
    <tr><td class="paramname">delay</td><td>A delay, in millisecond.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer to a new flm_Timer object.</dd></dl>
<div class="fragment"><pre class="fragment">  flm_Monitor * monitor;
  flm_Timer * timer;

  monitor = <a class="code" href="monitor_8h.html#a9ac7adccec16433fe0acbc6a9570aec9" title="Create a new flm_Monitor object.">flm_MonitorNew</a> ();
  timer = <a class="code" href="timer_8h.html#af21a94f6ef9e64cc0ec4d47fef11d258" title="Create a new timer.">flm_TimerNew</a> (monitor, my_handler, my_state, 2000);
  <a class="code" href="timer_8h.html#af24321f27e1afe647729a6342fb80447" title="Decrement the reference counter.">flm_TimerRelease</a> (timer);
</pre></div> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="Monitor_01unit_01tests-example.html#a6">Monitor unit tests</a>, and <a class="el" href="Timer_01unit_01tests-example.html#a1">Timer unit tests</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a0550f46fd2ded57e898360876210eec6"></a><!-- doxytag: member="timer.h::flm_TimerReset" ref="a0550f46fd2ded57e898360876210eec6" args="(flm_Timer *timer, uint32_t delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flm_TimerReset </td>
          <td>(</td>
          <td class="paramtype">flm_Timer *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset the timer. </p>
<p>The scheduled delay will be canceled and replaced with the new one. It is possible to reset a timer inside a timer handler, this can be useful to repeat the timer indefinitly.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>A pointer to a flm_Timer object. </td></tr>
    <tr><td class="paramname">delay</td><td>A delay, in millisecond.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing, this function cannot fail.</dd></dl>
<div class="fragment"><pre class="fragment">  flm_Monitor * monitor;
  flm_Timer * timer;

  monitor = <a class="code" href="monitor_8h.html#a9ac7adccec16433fe0acbc6a9570aec9" title="Create a new flm_Monitor object.">flm_MonitorNew</a> ();
  timer = <a class="code" href="timer_8h.html#af21a94f6ef9e64cc0ec4d47fef11d258" title="Create a new timer.">flm_TimerNew</a> (monitor, my_handler, my_state, 2000);
  <a class="code" href="timer_8h.html#a0550f46fd2ded57e898360876210eec6" title="Reset the timer.">flm_TimerReset</a> (timer, 4000);
  <a class="code" href="timer_8h.html#af24321f27e1afe647729a6342fb80447" title="Decrement the reference counter.">flm_TimerRelease</a> (timer);
</pre></div> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="Timer_01unit_01tests-example.html#a6">Timer unit tests</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a4bf56d6f81f12777bdb2d1695c088f7a"></a><!-- doxytag: member="timer.h::flm_TimerCancel" ref="a4bf56d6f81f12777bdb2d1695c088f7a" args="(flm_Timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flm_TimerCancel </td>
          <td>(</td>
          <td class="paramtype">flm_Timer *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cancel the timer. </p>
<p>The scheduled delay will be canceled. The monitor's reference to the timer will be released and, if there is no more references, the timer will be freed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>A pointer to a flm_Timer object.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">  flm_Monitor * monitor;
  flm_Timer * timer;

  monitor = <a class="code" href="monitor_8h.html#a9ac7adccec16433fe0acbc6a9570aec9" title="Create a new flm_Monitor object.">flm_MonitorNew</a> ();
  timer = <a class="code" href="timer_8h.html#af21a94f6ef9e64cc0ec4d47fef11d258" title="Create a new timer.">flm_TimerNew</a> (monitor, my_handler, my_state, 2000);
  <a class="code" href="timer_8h.html#a4bf56d6f81f12777bdb2d1695c088f7a" title="Cancel the timer.">flm_TimerCancel</a> (timer);
  <a class="code" href="timer_8h.html#af24321f27e1afe647729a6342fb80447" title="Decrement the reference counter.">flm_TimerRelease</a> (timer);
</pre></div> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="Timer_01unit_01tests-example.html#a4">Timer unit tests</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a5d0212004288711ecfa7ca06b4baceb3"></a><!-- doxytag: member="timer.h::flm_TimerRetain" ref="a5d0212004288711ecfa7ca06b4baceb3" args="(flm_Timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">flm_Timer* flm_TimerRetain </td>
          <td>(</td>
          <td class="paramtype">flm_Timer *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Increment the reference counter. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">monitor</td><td>A pointer to a flm_Timer object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The same pointer, this function cannot fail. </dd></dl>

</div>
</div>
<a class="anchor" id="af24321f27e1afe647729a6342fb80447"></a><!-- doxytag: member="timer.h::flm_TimerRelease" ref="af24321f27e1afe647729a6342fb80447" args="(flm_Timer *timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flm_TimerRelease </td>
          <td>(</td>
          <td class="paramtype">flm_Timer *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrement the reference counter. </p>
<p>When the counter reaches zero the timer will be freed.</p>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>the monitor used for the timer creation will keep a reference to the timer until the timer is either elapsed or cancelled. It means that you can release the timer immediatly after creating it, since it will be freed automatically when the monitor will release its own reference to the timer.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">monitor</td><td>A pointer to a monitor object. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="Monitor_01unit_01tests-example.html#a7">Monitor unit tests</a>, and <a class="el" href="Timer_01unit_01tests-example.html#a2">Timer unit tests</a>.</dd>
</dl>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Mar 17 2011 for libflm-0.3 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
